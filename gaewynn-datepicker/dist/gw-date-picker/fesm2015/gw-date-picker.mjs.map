{"version":3,"file":"gw-date-picker.mjs","sources":["../../../projects/gw-date-picker/src/lib/gw-date-picker.service.ts","../../../projects/gw-date-picker/src/lib/gw-date-picker.component.ts","../../../projects/gw-date-picker/src/lib/gw-date-picker.component.html","../../../projects/gw-date-picker/src/lib/gw-date-picker.module.ts","../../../projects/gw-date-picker/src/public-api.ts","../../../projects/gw-date-picker/src/gw-date-picker.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class GWDatePickerService {\n\n  constructor() { }\n}\n","import { Component, Inject, ContentChild, Input, NgZone, OnDestroy, OnInit } from '@angular/core';\nimport { ControlContainer, FormControlDirective, FormGroupDirective } from '@angular/forms';\n\nimport { DateAdapter, MAT_DATE_LOCALE } from '@angular/material/core';\nimport { MatDatepicker } from '@angular/material/datepicker';\nimport { Subject, Subscription, take } from 'rxjs';\n\nimport { IGWDatePickerOptions } from './moment-date-format';\n\n@Component({\n  selector: 'gaewynn-datepicker',\n  templateUrl: './gw-date-picker.component.html',\n  viewProviders: [{\n    provide: ControlContainer,\n    useExisting: FormGroupDirective\n  }]\n})\nexport class GWDatePickerComponent implements OnInit, OnDestroy {\n  \n  @ContentChild(MatDatepicker) \n  public datePicker!: MatDatepicker<Date>;\n\n  @ContentChild(FormControlDirective)\n  public formControl!: FormControlDirective;\n\n  @Input()\n  public options!: Subject<IGWDatePickerOptions>;\n\n  @Input()\n  public pickerName!: string;\n\n  private _dateFormatSubscription!: Subscription;\n  private _zoneSubscription!: Subscription;\n\n  constructor(\n    private readonly _zone: NgZone,\n    @Inject(MAT_DATE_LOCALE) private _locale: string,\n    private readonly _dateAdapter: DateAdapter<any>) { }\n\n  public ngOnInit(): void {\n\n    this._dateFormatSubscription = this.options.subscribe((newOptions: IGWDatePickerOptions) => {\n      this._updatePicker(newOptions);\n    });\n  }\n\n  public ngOnDestroy(): void {\n\n      this._dateFormatSubscription.unsubscribe();\n      this._zoneSubscription.unsubscribe();\n  }\n\n  private _updatePicker(options: IGWDatePickerOptions): void {\n    \n    this._zoneSubscription = this._zone.onStable\n      .pipe(take(1))\n      .subscribe(() => {\n        \n        this._updateFormat(options);\n        const currentValue = this.formControl.form.value;\n        this.formControl.form.patchValue(currentValue);\n      });\n  }\n\n  private _updateFormat(options: IGWDatePickerOptions): void {\n\n    this._locale = options.locale;\n    this._dateAdapter.setLocale(options.locale);\n    (this.datePicker.datepickerInput as any)._dateFormats = options.momentDateFormat;\n  }\n}\n\n","<ng-content></ng-content>","import { NgModule } from '@angular/core';\n\nimport { MatDatepickerModule } from '@angular/material/datepicker';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatInputModule } from '@angular/material/input';\nimport { ReactiveFormsModule } from '@angular/forms';\n\nimport { GWDatePickerComponent } from './gw-date-picker.component';\n\n@NgModule({\n  declarations: [\n    GWDatePickerComponent\n  ],\n  imports: [\n    MatDatepickerModule,\n    MatFormFieldModule,\n    MatInputModule,\n    ReactiveFormsModule\n  ],\n  exports: [\n    GWDatePickerComponent\n  ]\n})\nexport class GWDatePickerModule { }\n","/*\n * Public API Surface of gaewynn-date-picker\n */\n\nexport * from './lib/gw-date-picker.service';\nexport * from './lib/gw-date-picker.component';\nexport * from './lib/gw-date-picker.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}